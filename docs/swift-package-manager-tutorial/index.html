<!DOCTYPE html>
<html >
<head>
    <meta charset="utf-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="canonical" href="https://theswiftdev.com/swift-package-manager-tutorial/">
    
    

    <title>Swift Package Manager tutorial - The.Swift.Dev.</title>
    <meta name="description" content="Learn how to use the Swift Package Manager to handle external dependencies, create your library or app on macOS and Linux.">

    <meta property="og:url" content="https://theswiftdev.com/swift-package-manager-tutorial/">
    <meta property="og:title" content="Swift Package Manager tutorial - The.Swift.Dev.">
    <meta property="og:description" content="Learn how to use the Swift Package Manager to handle external dependencies, create your library or app on macOS and Linux.">
    

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Swift Package Manager tutorial - The.Swift.Dev.">
    <meta name="twitter:description" content="Learn how to use the Swift Package Manager to handle external dependencies, create your library or app on macOS and Linux.">
    

    <link rel="stylesheet" href="https://theswiftdev.com/css/modern-normalize.css">
    <link rel="stylesheet" href="https://theswiftdev.com/css/modern-base.css">
    <link rel="stylesheet" href="https://theswiftdev.com/css/variables.css">
    <link rel="stylesheet" href="https://theswiftdev.com/css/base.css">
    <link rel="stylesheet" href="https://theswiftdev.com/css/grid.css">
    <link rel="stylesheet" href="https://theswiftdev.com/css/navigation.css">
    <link rel="stylesheet" href="https://theswiftdev.com/css/footer.css">
    

    

    <link rel="shortcut icon" href="https://theswiftdev.com/icons/favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="https://theswiftdev.com/icons/icon-320.png" type="image/png">
    
    <link rel="apple-touch-icon" href="https://theswiftdev.com/icons/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="57x57" href="https://theswiftdev.com/icons/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="72x72" href="https://theswiftdev.com/icons/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="https://theswiftdev.com/icons/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="https://theswiftdev.com/icons/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="https://theswiftdev.com/icons/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="https://theswiftdev.com/icons/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="https://theswiftdev.com/icons/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="https://theswiftdev.com/icons/apple-touch-icon-180x180.png">

    <link
        rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css"
        media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)">
    <link
        rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css"
        media="(prefers-color-scheme: dark)"
    >
    <link rel="stylesheet" href="https://theswiftdev.com/css/style.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>

</head>

<body>

    <div id="site-container">

    <header id="navigation">
        <a href="/">
            <picture>
                <img
                    src="https://theswiftdev.com/images/logos/logo.png"
                    alt="Logo of The.Swift.Dev."
                    title="The.Swift.Dev."
                >
            </picture>
        </a>
        <nav>
            <input type="checkbox" id="primary-menu-button" name="menu-button" class="menu-button">
            <label for="primary-menu-button">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="3" y1="12" x2="21" y2="12"></line>
                    <line x1="3" y1="6" x2="21" y2="6"></line>
                    <line x1="3" y1="18" x2="21" y2="18"></line>
                </svg>
            </label>
            <div class="menu-items">
                <a href="/page/1/">Posts</a>
            <a href="/tags/">Tags</a>
            <a href="/authors/">Authors</a>
            <a href="/practical-server-side-swift/">My Book</a>
            </div>
        </nav>
    </header>

    <main id="page-container">
    
    <div class="article-with-toc">
        <div>
            <article class="post">
                <div class="meta">            
                    <time datetime="2017-11-19T16:20:00.000Z">11/19/17 4:20 PM</time>
                     &middot; <span class="reading-time">5 min read</span>
                    
                </div>
                <h1>Swift Package Manager tutorial</h1>
                <hr>
                <p>Learn how to use the Swift Package Manager to handle external dependencies, create your library or app on macOS and Linux.</p>
                <section>
                
                <h2 id="swift-package-manager-basics">Swift Package Manager basics</h2><p>First of all, please check your Swift version on your device before we jump in this tutorial will only work with the latest toolchain, so you’ll need Swift 5.2 or newer.</p><pre><code>Apple Swift version 5.2.2 (swiftlang-1103.0.32.6 clang-1103.0.32.51)
Target: x86_64-apple-darwin19.4.0
</code></pre><h3 id="creating-apps">Creating apps</h3><p>All the hard work is done by the <code>swift package</code> command. You can enter that into a terminal window and see the available <a href="https://github.com/apple/swift-package-manager/blob/master/Documentation/Usage.md" target="_blank">sub-commands</a>. To generate a new package you should go with the init command, if you don’t provide a type flag, by default it’ll create a library, but this time we’d like to make an executable application.</p><pre><code>swift package init --type executable
swift build
swift run my-app
</code></pre><p>The compiler can build your source files with the help of the swift build command. The executable file is going to be placed somewhere under the <code>.build</code> directory, if you run the newly created application with the swift run my-app command, you should see the basic <code>Hello, world!</code> message.</p><blockquote><p>Congratulations for your first command line Swift application!</p></blockquote><p>Now you should do some actual coding. Usually your swift source files should be under the Sources directory, however you might want to create some reusable parts for your app. So let’s prepare for that scenario by starting a brand new library.</p><h3 id="making-a-library">Making a library</h3><p>We start with the <code>init</code> command, but this time we don’t specify the type. We actually could enter <code>swift package init --type library</code> but that’s way too may words to type. Also because we’re making a library, the SPM tool is going to provide us some basic tests, let’s run them too with the <code>swift test</code> command. 😜</p><pre><code>swift package init
swift test
# swift test --help
# swift test --filter &lt;test-target&gt;.&lt;test-case&gt;/&lt;test&gt;
</code></pre><p>If you check the file structure now you won’t find a <code>main.swift</code> file inside the source folder, but instead of this you’ll get an example unit test under the <code>Tests</code> directory.</p><p>Now know the basics. You have an example application and a library, so let’s connect them together with the help of the Swift Package Manager Manifest API!</p><h2 id="the-manifest-api---package.swift">The Manifest API - Package.swift</h2><p>Every SPM bundle has a Package.swift manifest file inside of it. In this manifest file you can define all your dependencies, targets and even the exact source files for your project. In this section I’ll teach you the basics of the manifest file.</p><h3 id="tool-version">Tool version</h3><p>First of all if you want to support the new manifest file format (aka. Swift 4 version), you have to set the swift-tools-version as comment in your manifest file.</p><pre><code>// swift-tools-version:5.2
</code></pre><p>Now you’re ready to work with the brand new manifest API.</p><h3 id="dependencies">Dependencies</h3><p>Let’s just add our library as a dependency for the main application first by creating a new package dependency inside the Package.swift file. The first argument is a package url string, which can be a local file path or a remote url (usually a github repo link). Note that you should add your dependency to the targets as well. Usually the specific name of a package is defined inside the library manifest file.</p><pre><code class="language-swift">// swift-tools-version:5.2
import PackageDescription

let package = Package(
    name: "my-app",
    dependencies: [
        .package(url: "../my-lib", .branch("master")),
    ],
    targets: [
        .target(name: "my-app", dependencies: [
            .product(name: "my-lib", package: "my-lib"),
        ]),
    ]
)
</code></pre><p>Now if you run <code>swift build</code> you’ll fail to build your sources. That’s because the SPM only works with git repositories. This means you have to create a repository for your library. Let’s move to the directory of the library and run the following commands.</p><pre><code>git init
git add .
git commit -m 'initial'
</code></pre><p>You should also note that we specified the branch in the package dependencies. You can use version numbers, or even commit hashes too. All the available options are well written inside the <a href="https://github.com/apple/swift-evolution/blob/master/proposals/0158-package-manager-manifest-api-redesign.md" target="_blank">manifest API redesign proposal</a> document.</p><p>Now let’s go back to the application directory and update the dependencies with the <code>swift package update</code> command. This time it’s going to be able to fetch, clone and finally resolve our dependency.</p><p>You can build and run, however we’ve forgot to set the access level of our struct inside our library to public, so nothing is going to be visible from that API.</p><pre><code>public struct my_lib {
    public var text = "Hello, World!"

    public init() {}
}
</code></pre><p>Let’s do some changes and commit them into the library’s main branch.</p><pre><code>git add .
git commit -m 'access level fix'
</code></pre><p>You’re ready to use the lib in the app, change the main.swift file like this.</p><pre><code class="language-swift">import my_lib

print(my_lib().text)
</code></pre><p>Update the dependencies again, and let’s do a release build this time.</p><pre><code>swift package update
swift build -c release
swift run -c release
</code></pre><p>With the <code>-c</code> or <code>--configuration</code> flag you can make a release build.</p><h3 id="products-and-targets">Products and targets</h3><p>By default the SPM works with the following target directories:</p><p>Regular targets: package root, Sources, Source, src, srcs. Test targets: Tests, package root, Sources, Source, src, srcs.</p><p>This means, that if you create .swift files inside these folders, those sources will be compiled or tested, depending on the file location. Also the generated manifest file contains only one build target (like Xcode targets), but sometimes you want to create multiple apps or libraries from the same bundle. Let’s change our Package.swift file a little bit, and see how can we make a brand new target.</p><pre><code class="language-swift">// swift-tools-version:5.2
import PackageDescription

let package = Package(
    name: "my-app",
    dependencies: [
        .package(url: "../my-lib", .branch("master")),
        .package(url: "https://github.com/kylef/Commander", from: "0.8.0"),
    ],
    targets: [
        .target(name: "my-app", dependencies: [
            .product(name: "my-lib", package: "my-lib"),
        ]),
        .target(name: "my-cmd", dependencies: [
            .product(name: "Commander", package: "Commander"),
        ], path: "./Sources/my-cmd", sources: ["main.swift"]),
    ]
)
</code></pre><p>We just created a new dependency from GitHub, and a brand new target which will contain only the <code>main.swift</code> file from the <code>Sources/my-cmd</code> directory. Now let’s create this directory and add the source code for the new app.</p><pre><code class="language-swift">import Foundation
import Commander

let main = command { (name:String) in
    print("Hello, \(name.capitalized)!")
}

main.run()
</code></pre><p>Build the project with swift build and run the newly created app with one extra name parameter. Hopefully you’ll see something like this.</p><pre><code>swift run my-cmd guest
# Hello, Guest!
</code></pre><p>So we just made a brand new executable target, however if you’d like to expose your targets for other packages, you should define them as products as well. If you open the manifest file for the library, you’ll see that there is a product defined from the library target. This way the package manager can link the product dependencies based on the given product name.</p><blockquote class="note"><p>You can define static or dynamic libraries, however it is recommended to use automatic so the SPM can decide appropriate linkage.</p></blockquote><pre><code class="language-swift">// swift-tools-version:5.2
import PackageDescription

let package = Package(
    name: "my-lib-package",
    products: [
        .library(name: "my-lib", targets: ["my-lib"]),
        //.library(name: "my-lib", type: .static, targets: ["my-lib"]),
        //.library(name: "my-lib", type: .dynamic, targets: ["my-lib"]),
    ],
    dependencies: [
        // .package(url: /* package url */, from: "1.0.0"),
    ],
    targets: [
        .target(name: "my-lib", dependencies: []),
        .testTarget(name: "my-libTests", dependencies: ["my-lib"]),
    ]
)
</code></pre><h3 id="deployment-target-other-build-flags">Deployment target, other build flags</h3><p>Sometimes you’ll need to specify a deployment target for your package. Now this is possible with the Swift Package Manager (it was buggy <a href="https://oleb.net/blog/2017/04/swift-3-1-package-manager-deployment-target/" target="_blank">a log time ago</a>), you just have to provide some extra arguments for the compiler, during the build phase.</p><pre><code>swift build -Xswiftc "-target" -Xswiftc "x86_64-apple-macosx10.12"
</code></pre><p>Also if you would like to define build flags, that’s possible too.</p><pre><code>swift build -Xswiftc "-D" -Xswiftc "DEBUG"
</code></pre><p>Now in your source code you can check for the existence of the DEBUG flag.</p><pre><code class="language-swift">#if DEBUG
    print("debug mode")
#endif
</code></pre><p>If you want to know more about the build process, just type <code>swift build --help</code> and you’ll see your available options for the build command.</p><p>This was SPM in a nutshell. Actually we have covered more than just the basics, we deep-dived a little into the Swift Package Manager, now you must be familiar with targets, products and most of the available commands, but there is always more to learn. So if you want to know even more about this amazing tool, you should check the Swift evolution dashboard for more info. 😉</p>
                    
                </section>
    
                <footer>
                    <br>
                    <time datetime=""></time>
    
                    
                    <div class="author-list">
                        <a href="https://theswiftdev.com/authors/tibor-bodecs/">
                        <img class="small rounded" src="https://theswiftdev.com/assets/authors/tibor-bodecs/tibor-bodecs.jpeg" alt="Tibor Bödecs">
                        </a>
                    </div>
                    <div class="tag-list">
                        <a href="https://theswiftdev.com/tags/swift-package-manager/"><small>Swift Package Manager</small></a>
                    </div>
                    
                    <p>
                        <a href="https://x.com/intent/tweet?via=tiborbodecs&amp;hashtags=SwiftLang&amp;url=https://theswiftdev.com/swift-package-manager-tutorial/" target="_blank">
                            <strong>Share this article</strong>
                        </a>
                        <br>Thank you. 🙏
                    </p>
                </footer>
                            
                <section class="group">
                    <h4>Related posts</h4>                
                    <div class="grid grid-221">
                        <div class="card">
                            
                            
                            <div class="author-list">
                                <a href="https://theswiftdev.com/authors/tibor-bodecs/">
                                <img class="small rounded" src="https://theswiftdev.com/assets/authors/tibor-bodecs/tibor-bodecs.jpeg" alt="Tibor Bödecs">
                                </a>
                            </div>
                            <div class="meta">
                                <time datetime="2022-05-16T16:20:00.000Z">5/16/22 4:20 PM</time>
                                 &middot; <span class="reading-time">9 min read</span>
                            </div>
                            
                            <h2 class="title"><a href="https://theswiftdev.com/beginners-guide-to-swift-package-manager-command-plugins/" target="">Beginner&#39;s guide to Swift package manager command plugins</a></h2>
                            <hr>
                            <p>Learn how to create command plugins for the Swift Package Manager to execute custom actions using SPM and other tools.</p>
                        
                            <div class="tag-list">
                                <a href="https://theswiftdev.com/tags/swift-package-manager/"><small>Swift Package Manager</small></a>
                            </div>
                        </div>
                    <div class="card">
                            
                            
                            <div class="author-list">
                                <a href="https://theswiftdev.com/authors/tibor-bodecs/">
                                <img class="small rounded" src="https://theswiftdev.com/assets/authors/tibor-bodecs/tibor-bodecs.jpeg" alt="Tibor Bödecs">
                                </a>
                            </div>
                            <div class="meta">
                                <time datetime="2022-01-20T16:20:00.000Z">1/20/22 4:20 PM</time>
                                 &middot; <span class="reading-time">4 min read</span>
                            </div>
                            
                            <h2 class="title"><a href="https://theswiftdev.com/how-to-create-a-swift-package-collection/" target="">How to create a Swift package collection?</a></h2>
                            <hr>
                            <p>In this tutorial I&#39;m going to show you how to create your own package collection from your favorite Swift libraries.</p>
                        
                            <div class="tag-list">
                                <a href="https://theswiftdev.com/tags/swift-package-manager/"><small>Swift Package Manager</small></a>
                            </div>
                        </div>
                    <div class="card">
                            
                            
                            <div class="author-list">
                                <a href="https://theswiftdev.com/authors/tibor-bodecs/">
                                <img class="small rounded" src="https://theswiftdev.com/assets/authors/tibor-bodecs/tibor-bodecs.jpeg" alt="Tibor Bödecs">
                                </a>
                            </div>
                            <div class="meta">
                                <time datetime="2022-05-24T16:20:00.000Z">5/24/22 4:20 PM</time>
                                 &middot; <span class="reading-time">4 min read</span>
                            </div>
                            
                            <h2 class="title"><a href="https://theswiftdev.com/introduction-to-spm-artifact-bundles/" target="">Introduction to SPM artifact bundles</a></h2>
                            <hr>
                            <p>In this tutorial I&#39;m going to show you how to use the new binary target related artifact bundle using the Swift package manager.</p>
                        
                            <div class="tag-list">
                                <a href="https://theswiftdev.com/tags/swift-package-manager/"><small>Swift Package Manager</small></a>
                            </div>
                        </div>
                    <div class="card">
                            
                            
                            <div class="author-list">
                                <a href="https://theswiftdev.com/authors/tibor-bodecs/">
                                <img class="small rounded" src="https://theswiftdev.com/assets/authors/tibor-bodecs/tibor-bodecs.jpeg" alt="Tibor Bödecs">
                                </a>
                            </div>
                            <div class="meta">
                                <time datetime="2017-11-19T16:20:00.000Z">11/19/17 4:20 PM</time>
                                 &middot; <span class="reading-time">5 min read</span>
                            </div>
                            
                            <h2 class="title"><a href="https://theswiftdev.com/swift-package-manager-tutorial/" target="">Swift Package Manager tutorial</a></h2>
                            <hr>
                            <p>Learn how to use the Swift Package Manager to handle external dependencies, create your library or app on macOS and Linux.</p>
                        
                            <div class="tag-list">
                                <a href="https://theswiftdev.com/tags/swift-package-manager/"><small>Swift Package Manager</small></a>
                            </div>
                        </div>
                    </div>
                </section>
    
            </article>
        </div>
        
        <div>
            <div class="book">
                <a href="https://theswiftdev.gumroad.com/l/practical-server-side-swift" target="_blank">
                    <img src="https://theswiftdev.com/book/practical-server-side-swift-cover.png" alt="Practical Server Side Swift cover image">
                </a>
                <h3>
                    <a href="https://theswiftdev.gumroad.com/l/practical-server-side-swift" target="_blank">Get the Practical Server Side Swift book</a>
                </h3>
                <p>Swift on the server is an amazing new opportunity to build fast, safe and scalable backend apps. Write your very first web-based application by using your favorite programming language. Learn how to build a modular blog engine using the latest version of the Vapor 4 framework. This book will help you to design and create modern APIs that'll allow you to share code between the server side and iOS. Start becoming a full-stack Swift developer.</p>
                <a class="cta" href="https://theswiftdev.gumroad.com/l/practical-server-side-swift" target="_blank">Available on Gumroad</a>
            </div>
            
            
            <aside id="toc">
                <h4>On this page</h4>
                <ul>
                    <li class="level-2">
                        <a href="#swift-package-manager-basics">Swift Package Manager basics</a>
                    </li>
        <li class="level-3">
                        <a href="#creating-apps">Creating apps</a>
                    </li>
        <li class="level-3">
                        <a href="#making-a-library">Making a library</a>
                    </li>
        <li class="level-2">
                        <a href="#the-manifest-api---package.swift">The Manifest API - Package.swift</a>
                    </li>
        <li class="level-3">
                        <a href="#tool-version">Tool version</a>
                    </li>
        <li class="level-3">
                        <a href="#dependencies">Dependencies</a>
                    </li>
        <li class="level-3">
                        <a href="#products-and-targets">Products and targets</a>
                    </li>
        <li class="level-3">
                        <a href="#deployment-target-other-build-flags">Deployment target, other build flags</a>
                    </li>
                </ul>
            </aside>
            
    
        </div>
    </div>
    
    </main>

    <footer id="site-footer">
        <div class="grid grid-421">
    
            <picture>
                <img
                    id="logo-image"
                    src="https://theswiftdev.com/images/logos/logo-large.png"
                    alt="Logo of The.Swift.Dev."
                    title="The.Swift.Dev."
                >
            </picture>
            
            <div>
                <span style="display: block; height: 32px;">&nbsp;</span>
                <h4>The.Swift.Dev</h4>
                <p><small><a href="https://theswiftdev.com/" target="_blank">theswiftdev.com</a></small></p>
                <ul>
                    <li><a href="https://github.com/theswiftdev/" target="_blank">GitHub</a></li>
                    <li><a href="https://theswiftdev.com/rss.xml" target="_blank">RSS</a></li>
                    <li><a href="https://theswiftdev.com/sitemap.xml" target="_blank">Sitemap</a></li>
                </ul>
            </div>
            
            <div>
                
            </div>
            
            <div>
                <a href="https://theswiftdev.com/authors/tibor-bodecs/">
                <img class="small rounded" src="https://theswiftdev.com/assets/authors/tibor-bodecs/tibor-bodecs.jpeg" alt="Tibor Bödecs">
                </a>
                <h4><a href="https://theswiftdev.com/authors/tibor-bodecs/">Tibor Bödecs</a></h4>
                <p><small><a href="https://binarybirds.com/" target="_blank">Binary Birds Kft.</a></small></p>
                <ul>
                    <li><a href="mailto:mail.tib@gmail.com" target="_blank">Email</a></li>
                    <li><a href="https://github.com/tib/" target="_blank">GitHub</a></li>
                    <li><a href="https://x.com/tiborbodecs" target="_blank">X (Twitter)</a></li>
                    <li><a href="https://mastodon.social/@tiborbodecs" target="_blank">Mastodon</a></li>
                </ul>
            </div>
            
        </div>
        
        <section class="grid grid-221">
            <small>Tibor Bödecs &copy; 2015 - 2025</small>
            <small>This site was generated using <a href="https://swift.org/" target="_blank">Swift</a> & <a href="https://github.com/binarybirds/toucan" target="_blank">Toucan</a>.</small>
        </section>
    </footer>

    </div>

    
</body>
</html>
